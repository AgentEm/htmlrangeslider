$(document).ready(function(){function e(e){var n=a.offset(),o=e-n.left;return o/a.width()}function n(){var e=a.val();if(console.log("change handled",e),i!==e){i=e;var n=e/l,o=100*n+"%";$(".range-fill").css("width",o),a.hide().show(0)}}function o(){c=(new Date).getTime()}function t(t){return function(i){var r=(new Date).getTime(),u=r-c,h=400;if(console.log("timeDiff",u),u>h&&(1===i.which||0===i.which)){console.log("move event",i);var f,v=i.originalEvent.clientX||i.originalEvent.changedTouches[0].clientX,s=e(v);f=s*l,t&&(f=Math.round(f),o()),a.val(f),n(i)}}}var i,c,a=$("input[type=range]"),l=parseInt(a.attr("max"));o(),a.on("touchend mouseup click",t("snap")),a.on("touchmove mousemove click",t())});